# Задачи

- [x] добавление импортов внутри testFramework (нормально делать `import unittest`). У TestClassContext есть поле testClassSuperclass, но оно иницализируется null в двух местах в CgContext, нужно либо менять логику там и добавлять аргументы, либо задавать его, как сейчас, в PythonCgTestClassConstructor:
  ```python
  # line 69
  with (currentTestClassContext) {
      annotations += collectedTestClassAnnotations
      superclass = testFramework.testSuperClass
      interfaces += collectedTestClassInterfaces
  }
  ```
  Кроме этого добавил поле testSuperClass в TestFramework (null по умолчанию), которе задается сейчас только для unittest.

- [x] importIfNeeded для моделей, которые подаются на вход функции

  В джаве никогда такого не возникало, для питона это нормальная ситуация, которую надо обработать.

- [x] Переделать sys.path в import.

  Возможное решение: разные наследники PythonImport, введение порядка на импортах, установка приоритетов. Часть логики уже написана, но за последний день мы не успели.

- [x] Конфликты имен переменных с модулями (или еще чем-нибудь)

  Сейчас это делается через изменение existingVariableNames, это раскидано в нескольких местах в файлах PythonCg...kt. -> _уже не раскидано_
  
  Можно сделать в CgContext отдельный контейнер для таких ситуаций, и учитывать его в CgNameGenerator.
  
  Возможная проблема: мы можем сначала создать переменную, а потом импортировать модуль с таким именем. Возможное решение: редактировать Cg элементы уже созданных переменных.

  __Update__: Добавил в PythonCgNameGenerator проверку на совпадение c каким-либо из импортированных модулей. Если для составных питоновских объектов все импорты собираются в allContainingsClassId, то этого достаточно, чтобы сохранить в контекст все импорты перед началом генерации всех тестов.

  Единственный импорт, который добавляется сейчас внутри генерации - copyreg, наверное, его нужно добавлять в allContainingClassIds. __Done__

- [ ] Убрать if-ы из Cg... с Python -> (перенес логику из CgMethodConstructor в PythonCgMethodConstructor)
  Внутри Cg... единственная python-логика осталась в функции pythonGenerateAsStringWithTestReport в CodeGenerator, остальные перенесены в PythonCg...
  
  Постепенно убираются ифы и из PythonCg..., но пока есть моменты, которые не убрать на данный момент

 
# Вопросы
* В каком месте создавать python пакет в `utbot-framework`? 
* Что делать с python-ветками в разных when?
* Что делать с Domain.kt? Нужно ли убирать оттуда питоновские тестовые фреймворки


1. Запустить с разными Pycharm
 
| IDE | Результат   |
|-----|-------------|
| IC  | Работает    |
| IU  | Работает    |
| PC  | Не работает |
| PY  | Не работает |

2. Попробовать с отключенным python -> Работает

3. CLI -> Перенесено из ветки utbot-python в том же виде. В дальнейшем можно либо выделить cli/python в отдельный модуль, либо перенести в utbot-python, а внутри cli/Application.kt использовать делегатов